#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

COMMIT_MSG=$(cat $1)

# –ò—â–µ–º –Ω–æ–º–µ—Ä issue –≤ –Ω–∞—á–∞–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ—Å–ª–µ —Ç–∏–ø–∞)
if echo "$COMMIT_MSG" | grep -q "^[a-z]*: #[0-9]"; then
    ISSUE_NUMBER=$(echo "$COMMIT_MSG" | grep -o '#[0-9]*' | sed 's/#//')
    echo "üîß –ó–∞–∫—Ä—ã–≤–∞—é issue #$ISSUE_NUMBER..."
    gh issue close $ISSUE_NUMBER --comment "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤: $COMMIT_MSG"
fi
npx commitlint --edit $1